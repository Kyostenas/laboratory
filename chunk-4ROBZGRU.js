import{$a as oe,Aa as q,Ba as J,Da as K,G as V,H as X,L as Y,Na as Q,Oa as l,Pa as d,Ua as ee,Va as M,W as R,X as I,Xa as te,Ya as ne,Za as _,_a as ie,ab as re,ca as L,f as y,ha as z,hb as se,j as x,n as F,oa as $,pa as A,ra as U,rb as ae,t as W,ta as G,ua as p,ya as Z,z as j}from"./chunk-ZIRGDKY5.js";import{a as v}from"./chunk-2NFLSA4Y.js";var ce=991,k=1.5,B=3.5,H=.25,he="fit-content",u="bottom",g=5,fe=400,w=class r{constructor(e,t,n){this.renderer2=e;this.element_ref=t;this.cdr=n}set _container_data(e){setTimeout(()=>{this.container_data=v(v({},this.container_data),e)},0)}destroyed_emitter=new K;ngOnInit(){this.container_id="_"+Math.round(Math.random()*1e8),this.evaluate_screen_mode(),this.HTML_host=this.element_ref.nativeElement,this.renderer2.addClass(this.HTML_host,"floating-containers-host")}ngOnDestroy(){this.unlisten_enter&&this.unlisten_enter(),this.unlisten_leave&&this.unlisten_leave(),this.destroy$.next(),this.destroy$.complete()}container_data={size:he,min_height:`${k}rem`,min_width:`${B}rem`,header_padding:`${H}rem`,body_padding:`${H}rem`,footer_padding:`${H}rem`,full_screen_breakpoint:ce,placement:u};screen_mode="mobile-tablet";container_id;container_visible=!1;HTML_document_body=document.body;HTML_host;HTML_backdrop;HTML_container;HTML_header;HTML_body;HTML_footer;EMBEDDED_header;EMBEDDED_body;EMBEDDED_footer;mouse_enter$=new y;mouse_leave$=new y;destroy$=new y;unlisten_enter;unlisten_leave;on_window_resize(){this.evaluate_screen_mode(),this.positionate_container(this.container_data.placement??u)}on_window_scroll(){this.evaluate_screen_mode(),this.positionate_container(this.container_data.placement??u)}on_click(e){this.toggle_container()}on_mouse_enter(){let e=!!document.getElementById(this.container_id);this.container_visible&&e&&this.HTML_container||this.create_container(),this.mouse_enter$.next()}on_mouse_leave(){this.mouse_leave$.next()}evaluate_screen_mode(){window.innerWidth<(this.container_data.full_screen_breakpoint??ce)?this.screen_mode="mobile-tablet":this.screen_mode="desktop",this.screen_mode==="mobile-tablet"?this.container_data.full_screen=!0:this.container_data.full_screen=!1}assign_styles_to_element(e,t){for(let[n,i]of Object.entries(t))this.renderer2.setStyle(e,n,i)}remove_styles_of_element(e,t){for(let n of t)this.renderer2.removeStyle(e,n)}assign_properties_to_element(e,t){for(let[n,i]of Object.entries(t))this.renderer2.setAttribute(e,n,i)}remove_properties_of_element(e,t){for(let n of t)this.renderer2.removeAttribute(e,n)}assign_classes_to_element(){}remove_classes_of_element(){}get_current_font_size(){let e=window.getComputedStyle(this.HTML_document_body);return parseFloat(e.fontSize)}toggle_container(){let e=!!document.getElementById(this.container_id);this.container_visible&&e&&this.HTML_container?(this.destroy_container(),this.ngOnDestroy()):this.create_container()}destroy_container(){this.renderer2.removeChild(this.HTML_document_body,this.HTML_container),this.container_visible=!1,this.destroyed_emitter.emit()}create_container(){this.HTML_container=this.renderer2.createElement("div"),this.unlisten_enter=this.renderer2.listen(this.HTML_container,"mouseenter",()=>{this.mouse_enter$.next()}),this.unlisten_leave=this.renderer2.listen(this.HTML_container,"mouseleave",()=>{this.mouse_leave$.next()});let e=this.mouse_enter$.pipe(F(()=>!0)),t=this.mouse_leave$.pipe(F(()=>!1));W(e,t).pipe(V(n=>n?x(!0):x(!1).pipe(j(fe))),X(this.destroy$)).subscribe(n=>{if(n)this.positionate_container(this.container_data?.placement??u);else{let i=!!document.getElementById(this.container_id);this.container_visible&&i&&this.HTML_container&&(this.destroy_container(),this.ngOnDestroy())}}),this.HTML_container&&(this.assign_styles_to_element(this.HTML_container,v({isolation:"isolate",position:"fixed",contain:"layout","text-wrap":"wrap","z-index":"100","backdrop-filter":"blur(15px)",background:"rgba(0, 0, 0, .2)",color:"white","box-shadow":"0px 4px 8px rgba(0, 0, 0, 0.3)",top:"0",left:"0","min-height":this.container_data.min_height??`${k}rem`,"min-width":this.container_data.min_width??`${B}rem`,padding:this.container_data.body_padding??`${H}rem`,overflow:"auto","border-radius":".5rem"},this.container_data?.container_css_styles)),this.assign_properties_to_element(this.HTML_container,{id:this.container_id})),this.HTML_body=this.renderer2.createElement("div"),typeof this.container_data?.body_content=="string"?(this.renderer2.setProperty(this.HTML_body,"innerHTML",this.container_data.body_content),this.HTML_body&&this.assign_styles_to_element(this.HTML_body,{"white-space":"pre-wrap"})):this.container_data?.body_content instanceof U&&(this.EMBEDDED_body=this.container_data.body_content.createEmbeddedView(this.container_data.template_context||{}),this.EMBEDDED_body.rootNodes.forEach(n=>{this.renderer2.appendChild(this.HTML_body,n)}),this.EMBEDDED_body.detectChanges()),this.renderer2.appendChild(this.HTML_container,this.HTML_body),this.renderer2.appendChild(this.HTML_document_body,this.HTML_container),this.positionate_container(this.container_data?.placement??u),this.cdr?.detectChanges(),this.container_visible=!0}check_screen_bounds(e){let t=this.HTML_container?.getBoundingClientRect(),n=0,i=0,o=!1;return(t?.top??0)<0&&(e==="top"?(o=!0,e="bottom"):n=t?.top??0),(t?.left??0)<0&&(e==="left"?(o=!0,e="right"):i=t?.left??0),(t?.right??0)>window.innerWidth&&(e==="right"?(o=!0,e="left"):i=window.innerWidth-(t?.right??0)),(t?.bottom??0)>window.innerHeight&&(e==="bottom"?(o=!0,e="top"):n=window.innerHeight-(t?.bottom??0)),{top_correction:n,left_correction:i,recalculate:o,placement:e}}positionate_container(e,t=0,n=0,i=0){if(i>8)return;let o=this.HTML_host?.getBoundingClientRect(),h=window.scrollY||this.HTML_document_body.scrollTop,b=window.scrollX||this.HTML_document_body.scrollLeft,E=this.HTML_container?.offsetHeight,N=this.HTML_container?.offsetWidth,f=window.innerHeight,T=window.innerWidth,s=0,a=0,m=0,c=0,C=0,S=0;switch(e){case"top":s=(o?.top??0)+h-(E??0)-g,a=(o?.left??0)+b,m=T,c=f+(E??0)+s;break;case"bottom":s=(o?.bottom??0)+h+g,a=(o?.left??0)+b,m=T,c=f+(f-s);break;case"right":s=o?.top??0,a=(o?.right??0)+b+g,m=T-a,c=f;break;case"left":s=o?.top,a=(o?.left??0)-(N??0)-g,m=a+(N??0),c=f;break;default:s=(o?.top??0)+h-(E??0)-g,a=(o?.left??0)+b,m=T,c=f+(E??0)+s;break}this.HTML_container&&this.assign_styles_to_element(this.HTML_container,{"max-height":`${c}px`,"max-width":`${m}px`,top:`${s}px`,left:`${a}px`});let{top_correction:O,left_correction:P,recalculate:_e,placement:me}=this.check_screen_bounds(e);if(_e)return this.positionate_container(me,O,P,i+1);s=(s??0)+O,a=(a??0)+P,(this.HTML_container?.offsetWidth??0)>=B*this.get_current_font_size()&&!this.container_data.min_width&&((this.HTML_container?.offsetWidth??0)<c?C=this.HTML_container?.offsetWidth??0:C=m),(this.HTML_container?.offsetHeight??0)>=k*this.get_current_font_size()&&!this.container_data.min_height&&((this.HTML_container?.offsetHeight??0)<c?S=this.HTML_container?.offsetHeight??0:S=c),this.HTML_container&&this.assign_styles_to_element(this.HTML_container,{"max-height":`${c}px`,"max-width":`${m}px`,"min-height":`${S}px`,"min-width":`${C}px`,top:`${s}px`,left:`${a}px`})}static \u0275fac=function(t){return new(t||r)(p(G),p(z),p(se))};static \u0275dir=q({type:r,selectors:[["","generic-floating-container",""]],hostBindings:function(t,n){t&1&&M("resize",function(){return n.on_window_resize()},$)("scroll",function(){return n.on_window_scroll()},$)("click",function(o){return n.on_click(o)})("mouseenter",function(){return n.on_mouse_enter()})("mouseleave",function(){return n.on_mouse_leave()})},inputs:{_container_data:[0,"generic-floating-container","_container_data"]},outputs:{destroyed_emitter:"destroyed"}})};var D=class r{componente=L(void 0);set_componente(e){this.componente.update(t=>e)}get_componente(){return this.componente}static \u0275fac=function(t){return new(t||r)};static \u0275prov=Y({token:r,factory:r.\u0275fac,providedIn:"root"})};var ue=()=>({body_content:`asd\xF1flkjas\xF1dlkfjas\xF1lkdjf\xF1laksdjf\xF1laskdjf
asdf
asdf
asdf
asdf
asdf
asdf
asdf
asdf
asdf
asdf
asdf
asdf`,placement:"bottom"});function ge(r,e){if(r&1&&(l(0,"span",3),_(1,"Content for Slot 1"),d(),l(2,"p",3),_(3,"Another Content for Slot 1"),d(),l(4,"div",4),_(5,"Content for Slot 2"),d(),l(6,"p",5),_(7,"Content for Slot 3"),d(),l(8,"p",6),_(9),d(),l(10,"p",7),_(11,"Content for Custom Slot"),d(),l(12,"p",8),_(13,"Content for Fallback Slot"),d()),r&2){let t=te();A(9),ie(t.content)}}var de=class r{constructor(e){this.header_service=e;this.titulo_componente=this.header_service.get_componente()}titulo_componente;titulo_string=L("LABORATORY");buttonTop=0;buttonLeft=0;offsetX=0;offsetY=0;onDragStart(e){if(e.target instanceof HTMLElement){let t=e.target.getBoundingClientRect();this.offsetX=e.clientX-t.left,this.offsetY=e.clientY-t.top,e.dataTransfer?.setData("text/plain","")}}onDragEnd(e){this.buttonTop=e.clientY-this.offsetY,this.buttonLeft=e.clientX-this.offsetX}content="Initial content from AppComponent";updateContent(){this.content=`AppComponent updated at ${new Date().toLocaleTimeString()}`,console.log(this.content)}floating_data={body_content:"hola"};static \u0275fac=function(t){return new(t||r)(p(D))};static \u0275cmp=Z({type:r,selectors:[["csys-layout-publico"]],decls:5,vars:6,consts:[["slotContent",""],[1,"tw:w-[100vw]","tw:h-[100vh]"],["id","draggableButton","draggable","true",1,"btn","btn-primary","tw:cursor-move","tw:select-none","tw:absolute","tw:p-3","tw:rounded-lg",3,"dragstart","dragend","generic-floating-container"],["contentSlot","","slot","1"],["contentSlot","","slot","2"],["contentSlot","","slot","3"],["contentSlot","","slot","4"],["contentSlot","","slot","custom"],["contentSlot",""]],template:function(t,n){if(t&1){let i=ee();l(0,"div",1)(1,"button",2),M("dragstart",function(h){return R(i),I(n.onDragStart(h))})("dragend",function(h){return R(i),I(n.onDragEnd(h))}),_(2," Drag Me "),J(3,ge,14,1,"ng-template",null,0,re),d()()}t&2&&(A(),ne("top",n.buttonTop,"px")("left",n.buttonLeft,"px"),Q("generic-floating-container",oe(5,ue)))},dependencies:[ae,w],encapsulation:2})};export{de as LayoutPublicoComponent};
